<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext
                   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd
                   http://www.liquibase.org/xml/ns/dbchangelog
                   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
    <changeSet author="Ruslan Beyganov" id="2016-11-20--09-add_attribute" objectQuotingStrategy="LEGACY">
        <sql splitStatements="true">
            /************ Add: Sequences ***************/

            CREATE SEQUENCE core.attribute_id_seq INCREMENT BY 1;
            COMMENT ON SEQUENCE core.attribute_id_seq IS 'DbWrench Autogenerated Sequence.';



            /************ Update: Tables ***************/

            /******************** Add Table: core.attribute ************************/

            /* Build Table Structure */
            CREATE TABLE core.attribute
            (
            id BIGINT DEFAULT nextval('core.attribute_id_seq'::regclass) NOT NULL,
            object VARCHAR(20) NOT NULL,
            object_id BIGINT NOT NULL,
            type_value VARCHAR(20) NOT NULL,
            value VARCHAR(2000) NOT NULL
            ) WITHOUT OIDS;

            /* Add Primary Key */
            ALTER TABLE core.attribute ADD CONSTRAINT pkattribute
            PRIMARY KEY (id);

            /* Add Comments */
            COMMENT ON COLUMN core.attribute.object IS 'Код объекта';

            COMMENT ON COLUMN core.attribute.object_id IS 'ID объекта';

            COMMENT ON COLUMN core.attribute.type_value IS 'Тип значения';

            COMMENT ON COLUMN core.attribute.value IS 'Значение';

            COMMENT ON TABLE core.attribute IS 'Атрибуты';
        </sql>
    </changeSet>
</databaseChangeLog>